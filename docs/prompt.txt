ola, tenho um projeto de uma imobiliaria e estou seguindo um documento para cosntruir todas as funcionalidades do paienl, e ja fiz crm, fiannceiro, contratos, perfis, imovies, preciso de ajuda para fazer o modulo de manutencao, estoufazendo da seguinteforma, utilizando meus componentes ja criados, e fazendo um unico arquivo de rota para concentrar todas as requisicoes, e criando rotas, components e as paginas de cada modulo, vou te mandar exemplos de codigos e arquivos para voce mefalar como podemos construir esse modulo, sem mandar nenhum codigo ainda

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* =========================================================
     ðŸŒž TEMA CLARO
     ========================================================= */
  :root {
    --background: 240 5% 96%;
    --foreground: 240 5% 15%;

    --panel-bg: 240 5% 96%;
    --panel-card: 0 0% 100%;
    --panel-card-foreground: 240 5% 15%;
    --panel-active: 162 30% 22%;
    --panel-active-foreground: 0 0% 98%;

    --muted: 240 5% 90%;
    --muted-foreground: 240 5% 40%;
    --secondary: 240 5% 90%;
    --secondary-foreground: 240 5% 15%;

    --accent: 162 30% 22%;
    --accent-foreground: 0 0% 98%;

    --border: 240 5% 85%;
    --input: 240 5% 90%;
    --ring: 162 30% 22%;
  }

  /* =========================================================
     ðŸŒš TEMA ESCURO
     ========================================================= */
  .dark {
    --background: 240 4% 8%;          /* Fundo geral: quase preto, mas nÃ£o puro */
    --foreground: 240 5% 85%;         /* Texto cinza-claro */
    
    --panel-bg: 240 4% 8%;            /* Fundo da sidebar */
    --panel-card: 240 6% 13%;         /* Fundo dos cards */
    --panel-card-foreground: 240 5% 85%;
    
    --panel-active: 162 25% 25%;      /* Verde escuro elegante */
    --panel-active-foreground: 0 0% 98%;
    
    --muted: 240 4% 20%;              /* Cinza mÃ©dio */
    --muted-foreground: 240 4% 70%;
    
    --secondary: 240 4% 20%;
    --secondary-foreground: 240 5% 85%;
    
    --accent: 162 25% 25%;
    --accent-foreground: 0 0% 98%;

    /* ðŸ”¹ Ajuste principal: bordas e inputs com cinza intermediÃ¡rio */
    --border: 240 4% 25%;             /* Antes era muito claro (#94949E); agora, mais suave */
    --input: 240 5% 18%;              /* MantÃ©m consistÃªncia com fundo */
    --ring: 162 20% 40%;              /* Sutil, com toque verde esmaecido */
  }
}

import { NextResponse } from "next/server";
import { createServiceClient } from "@/lib/supabase/server";

/**
 * ðŸ’° API Financeiro â€” CRUD completo
 *
 * Funcionalidades:
 *  - GET: Listagem + filtros
 *  - POST: CriaÃ§Ã£o de lanÃ§amento financeiro
 *  - PUT: AtualizaÃ§Ã£o de status/dados
 *  - DELETE: ExclusÃ£o de transaÃ§Ã£o
 *
 * Query params suportados no GET:
 *   ?type=receber|pagar|repasse|inadimplencia|comissoes|fluxo
 *   ?status=pago|pendente|atrasado|cancelado
 *   ?contrato_id=<uuid>
 *   ?profile_id=<uuid>
 *   ?imovel_id=<uuid>
 *   ?start_date=YYYY-MM-DD
 *   ?end_date=YYYY-MM-DD
 */

export async function GET(req) {
  const supabase = createServiceClient();
  const { searchParams } = new URL(req.url);

  const type = searchParams.get("type") || "fluxo";
  const status = searchParams.get("status");
  const contrato_id = searchParams.get("contrato_id");
  const profile_id = searchParams.get("profile_id");
  const imovel_id = searchParams.get("imovel_id");
  const start_date = searchParams.get("start_date");
  const end_date = searchParams.get("end_date");

  try {
    let query = supabase
      .from("transacoes")
      .select(
        `
        id,
        contrato_id,
        imovel_id,
        profile_id,
        tipo,
        status,
        descricao,
        valor,
        data_vencimento,
        data_pagamento,
        dados_cobranca_json,
        created_at
      `,
        { count: "exact" }
      );

    // ========================
    // ðŸ”¹ Filtros dinÃ¢micos
    // ========================
    if (status && status !== "all") query = query.eq("status", status);
    if (contrato_id) query = query.eq("contrato_id", contrato_id);
    if (profile_id) query = query.eq("profile_id", profile_id);
    if (imovel_id) query = query.eq("imovel_id", imovel_id);
    if (start_date) query = query.gte("data_vencimento", start_date);
    if (end_date) query = query.lte("data_vencimento", end_date);

    // ========================
    // ðŸ”¸ Tipos lÃ³gicos
    // ========================
    switch (type) {
      case "receber":
        query = query.in("tipo", ["receita_aluguel", "taxa_adm_imobiliaria"]);
        break;
      case "pagar":
        query = query.in("tipo", [
          "repasse_proprietario",
          "comissao_corretor",
          "despesa_manutencao",
          "pagamento_iptu",
          "pagamento_condominio",
        ]);
        break;
      case "repasse":
        query = query.eq("tipo", "repasse_proprietario");
        break;
      case "inadimplencia":
        query = query.in("status", ["pendente", "atrasado"]);
        break;
      case "comissoes":
        query = query.eq("tipo", "comissao_corretor");
        break;
      case "fluxo":
      default:
        break;
    }

    query = query.order("data_vencimento", { ascending: false });
    const { data, error, count } = await query;
    if (error) throw error;

    // ========================
    // ðŸ”¹ Enriquecimento bÃ¡sico
    // ========================
    const contratosIds = [...new Set(data.map((d) => d.contrato_id).filter(Boolean))];
    const imoveisIds = [...new Set(data.map((d) => d.imovel_id).filter(Boolean))];
    const perfisIds = [...new Set(data.map((d) => d.profile_id).filter(Boolean))];

    const [contratosRes, imoveisRes, perfisRes] = await Promise.all([
      contratosIds.length
        ? supabase
            .from("contratos")
            .select("id, tipo, data_inicio, data_fim, valor_acordado, proprietario_id, inquilino_id")
            .in("id", contratosIds)
        : { data: [] },
      imoveisIds.length
        ? supabase
            .from("imoveis")
            .select("id, titulo, endereco_cidade, endereco_estado")
            .in("id", imoveisIds)
        : { data: [] },
      perfisIds.length
        ? supabase.from("profiles").select("id, nome_completo, role").in("id", perfisIds)
        : { data: [] },
    ]);

    const contratosMap = Object.fromEntries((contratosRes.data || []).map((c) => [c.id, c]));
    const imoveisMap = Object.fromEntries((imoveisRes.data || []).map((i) => [i.id, i]));
    const perfisMap = Object.fromEntries((perfisRes.data || []).map((p) => [p.id, p]));

    const enriched = data.map((t) => ({
      ...t,
      contrato: contratosMap[t.contrato_id] || null,
      imovel: imoveisMap[t.imovel_id] || null,
      profile: perfisMap[t.profile_id] || null,
    }));

    // ========================
    // ðŸ’µ Agregados financeiros
    // ========================
    const total_pago = enriched
      .filter((t) => t.status === "pago")
      .reduce((acc, t) => acc + Number(t.valor || 0), 0);
    const total_pendente = enriched
      .filter((t) => ["pendente", "atrasado"].includes(t.status))
      .reduce((acc, t) => acc + Number(t.valor || 0), 0);

    return NextResponse.json({
      data: enriched,
      meta: {
        total_registros: count || enriched.length,
        total_pago,
        total_pendente,
        filtro: type,
      },
    });
  } catch (err) {
    console.error("âŒ Erro em /api/financeiro [GET]:", err);
    return NextResponse.json({ error: err.message }, { status: 500 });
  }
}

/**
 * ðŸ”¹ CriaÃ§Ã£o de nova transaÃ§Ã£o financeira
 */
export async function POST(req) {
  const supabase = createServiceClient();
  try {
    const body = await req.json();
    const {
      contrato_id,
      imovel_id,
      profile_id,
      tipo,
      status = "pendente",
      descricao,
      valor,
      data_vencimento,
      data_pagamento,
      dados_cobranca_json = {},
    } = body;

    if (!tipo || !valor) {
      return NextResponse.json({ error: "Campos obrigatÃ³rios ausentes." }, { status: 400 });
    }

    const { data, error } = await supabase.from("transacoes").insert([
      {
        contrato_id,
        imovel_id,
        profile_id,
        tipo,
        status,
        descricao,
        valor,
        data_vencimento,
        data_pagamento,
        dados_cobranca_json,
      },
    ]);

    if (error) throw error;
    return NextResponse.json({ message: "TransaÃ§Ã£o criada com sucesso.", data });
  } catch (err) {
    console.error("âŒ Erro em /api/financeiro [POST]:", err);
    return NextResponse.json({ error: err.message }, { status: 500 });
  }
}

/**
 * ðŸ”¹ AtualizaÃ§Ã£o de transaÃ§Ã£o
 * Suporta update de status, valor, datas, descriÃ§Ã£o etc.
 */
export async function PUT(req) {
  const supabase = createServiceClient();
  try {
    const body = await req.json();
    const { id, ...updates } = body;
    if (!id) return NextResponse.json({ error: "ID obrigatÃ³rio." }, { status: 400 });

    updates.updated_at = new Date().toISOString();

    const { data, error } = await supabase.from("transacoes").update(updates).eq("id", id).select();
    if (error) throw error;

    return NextResponse.json({ message: "TransaÃ§Ã£o atualizada com sucesso.", data });
  } catch (err) {
    console.error("âŒ Erro em /api/financeiro [PUT]:", err);
    return NextResponse.json({ error: err.message }, { status: 500 });
  }
}

/**
 * ðŸ”¹ ExclusÃ£o de transaÃ§Ã£o
 */
export async function DELETE(req) {
  const supabase = createServiceClient();
  try {
    const body = await req.json();
    const { id } = body;
    if (!id) return NextResponse.json({ error: "ID obrigatÃ³rio para exclusÃ£o." }, { status: 400 });

    const { error } = await supabase.from("transacoes").delete().eq("id", id);
    if (error) throw error;

    return NextResponse.json({ message: "TransaÃ§Ã£o removida com sucesso." });
  } catch (err) {
    console.error("âŒ Erro em /api/financeiro [DELETE]:", err);
    return NextResponse.json({ error: err.message }, { status: 500 });
  }
}

"use client";
import { useState, useEffect } from "react";
import Card from "@/components/admin/ui/Card";
import Modal from "@/components/admin/ui/Modal";
import Toast from "@/components/admin/ui/Toast";
import { Button } from "@/components/ui/button";
import { Loader2, Plus, FileText, Edit, Trash2, Eye, AlertTriangle } from "lucide-react";
import CRMContratoForm from "./ContratoForm";
import CRMContratoDetailDrawer from "./ContratoDetailDrawer";


export default function CRMContratosPanel() {
  const [contratos, setContratos] = useState([]);
  const [loading, setLoading] = useState(true);
  const [openForm, setOpenForm] = useState(false);
  const [editing, setEditing] = useState(null);
  const [deleteTarget, setDeleteTarget] = useState(null);
  const [filter, setFilter] = useState({ tipo: "todos", status: "todos" });
  const [selectedContrato, setSelectedContrato] = useState(null);

  const loadContratos = async () => {
    try {
      setLoading(true);
      const res = await fetch("/api/contratos", { cache: "no-store" });
      const json = await res.json();
      if (!res.ok) throw new Error(json.error);
      setContratos(json.data || []);
    } catch (err) {
      Toast.error("Erro ao carregar contratos: " + err.message);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    loadContratos();
  }, []);

  const handleConfirmDelete = async () => {
    if (!deleteTarget?.id) return Toast.error("ID invÃ¡lido!");

    try {
      const res = await fetch(`/api/contratos?id=${deleteTarget.id}`, { method: "DELETE" });
      const json = await res.json();
      if (!res.ok) throw new Error(json.error);
      Toast.success("Contrato removido!");
      setDeleteTarget(null);
      loadContratos();
    } catch (err) {
      Toast.error(err.message);
    }
  };

  const filtered = contratos.filter((c) => {
    if (filter.tipo !== "todos" && c.tipo !== filter.tipo) return false;
    if (filter.status !== "todos" && c.status !== filter.status) return false;
    return true;
  });

  const statusColor = (status) => {
    const map = {
      ativo: "bg-emerald-600",
      encerrado: "bg-gray-500",
      pendente_assinatura: "bg-yellow-600",
      inadimplente: "bg-red-600",
    };
    return map[status] || "bg-muted";
  };

  return (
    <div className="space-y-4">
        {/* HEADER */}
        <div className="flex flex-col sm:flex-row justify-between sm:items-center gap-3">
        <h3 className="text-lg font-semibold flex items-center gap-2 text-foreground">
            <FileText size={18} /> Contratos
        </h3>

        <div className="flex flex-wrap gap-2 items-center">
            <select
            className="border border-border rounded-md p-2 bg-panel-card text-sm"
            value={filter.tipo}
            onChange={(e) => setFilter({ ...filter, tipo: e.target.value })}
            >
            <option value="todos">Todos os tipos</option>
            <option value="locacao">LocaÃ§Ã£o</option>
            <option value="venda">Venda</option>
            <option value="administracao">AdministraÃ§Ã£o</option>
            </select>

            <select
            className="border border-border rounded-md p-2 bg-panel-card text-sm"
            value={filter.status}
            onChange={(e) => setFilter({ ...filter, status: e.target.value })}
            >
            <option value="todos">Todos os status</option>
            <option value="ativo">Ativo</option>
            <option value="pendente_assinatura">Pendente de Assinatura</option>
            <option value="encerrado">Encerrado</option>
            </select>

            <Button onClick={() => setOpenForm(true)} className="flex items-center gap-2">
            <Plus size={16} /> Novo Contrato
            </Button>
        </div>
        </div>

        {/* LISTA */}
        {loading ? (
        <div className="flex justify-center items-center py-10 text-muted-foreground">
            <Loader2 className="animate-spin mr-2" /> Carregando...
        </div>
        ) : filtered.length === 0 ? (
        <p className="p-4 text-center text-muted-foreground">Nenhum contrato encontrado.</p>
        ) : (
        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-3">
            {filtered.map((contrato) => (
            <Card
                key={contrato.id}
                className="p-4 space-y-2 hover:shadow-lg transition cursor-pointer"
                onClick={() => setSelectedContrato(contrato.id)}
            >
                <div className="flex justify-between items-start">
                <div>
                    <h4 className="font-semibold text-foreground">
                    {contrato.imoveis?.titulo || "ImÃ³vel sem tÃ­tulo"}
                    </h4>
                    <p className="text-sm text-muted-foreground">
                    Tipo: {contrato.tipo} | Valor: R$ {Number(contrato.valor_acordado).toFixed(2)}
                    </p>
                </div>

                <div className="flex gap-1">
                    <Button
                    size="icon"
                    variant="ghost"
                    onClick={(e) => {
                        e.stopPropagation();
                        setEditing(contrato);
                        setOpenForm(true);
                    }}
                    >
                    <Edit size={16} />
                    </Button>
                    <Button
                    size="icon"
                    variant="ghost"
                    onClick={(e) => {
                        e.stopPropagation();
                        setDeleteTarget(contrato);
                    }}
                    >
                    <Trash2 size={16} className="text-red-500" />
                    </Button>
                </div>
                </div>

                <div className="text-xs text-muted-foreground flex justify-between">
                <span>
                    {contrato.data_inicio} â†’ {contrato.data_fim}
                </span>
                <span
                    className={`px-2 py-0.5 rounded-full text-white ${statusColor(contrato.status)}`}
                >
                    {contrato.status || "sem status"}
                </span>
                </div>
            </Card>
            ))}
        </div>
        )}

        {/* MODAL FORM */}
        <Modal
        open={openForm}
        onOpenChange={(val) => {
            setOpenForm(val);
            if (!val) setEditing(null);
        }}
        title={editing ? "Editar Contrato" : "Novo Contrato"}
        >
        <CRMContratoForm
            contrato={editing}
            onClose={() => {
            setOpenForm(false);
            setEditing(null);
            }}
            onSaved={loadContratos}
        />
        </Modal>

        {/* MODAL EXCLUSÃƒO */}
        <Modal
        open={!!deleteTarget}
        onOpenChange={(val) => !val && setDeleteTarget(null)}
        title="Remover Contrato"
        >
        {deleteTarget && (
            <div className="space-y-4">
            <div className="flex items-start gap-3 text-foreground">
                <AlertTriangle className="text-red-500 mt-1" />
                <div>
                <p>
                    Tem certeza que deseja remover o contrato do imÃ³vel{" "}
                    <strong>{deleteTarget.imoveis?.titulo}</strong>?
                </p>
                </div>
            </div>

            <div className="flex gap-2">
                <Button className="w-1/2" variant="secondary" onClick={() => setDeleteTarget(null)}>
                Cancelar
                </Button>
                <Button className="w-1/2 bg-red-600 hover:bg-red-700" onClick={handleConfirmDelete}>
                Confirmar
                </Button>
            </div>
            </div>
        )}
        </Modal>

        {/* DRAWER DETALHES */}
        {selectedContrato && (
        <CRMContratoDetailDrawer
            contratoId={selectedContrato}
            onClose={() => setSelectedContrato(null)}
            onUpdated={loadContratos}
        />
        )}
    </div>
    );
}

"use client";
import { useState } from "react";
import Table from "@/components/admin/ui/Table";
import Modal from "@/components/admin/ui/Modal";
import Toast from "@/components/admin/ui/Toast";
import { Button } from "@/components/ui/button";
import { formatCurrency } from "@/utils/formatters";
import {
  CheckCircle2,
  Clock,
  XCircle,
  AlertTriangle,
  Edit,
  Trash2,
} from "lucide-react";

/* ==========================================
   ðŸ”¹ BADGE DE STATUS
========================================== */
const StatusBadge = ({ status }) => {
  const map = {
    pago: "bg-emerald-100 text-emerald-800 border-emerald-200",
    pendente: "bg-amber-100 text-amber-800 border-amber-200",
    atrasado: "bg-rose-100 text-rose-800 border-rose-200",
    cancelado: "bg-gray-200 text-gray-800 border-gray-300",
  };

  return (
    <span
      className={`inline-block px-2 py-0.5 text-xs rounded border capitalize ${
        map[status] || "bg-muted text-foreground border-border"
      }`}
    >
      {status}
    </span>
  );
};

/* ==========================================
   ðŸ”¹ TABELA PRINCIPAL
========================================== */
export default function FinanceiroTable({ data = [], loading, onReload }) {
  const [deleteTarget, setDeleteTarget] = useState(null);
  const [deleting, setDeleting] = useState(false);

  const columns = [
    { key: "descricao", label: "DescriÃ§Ã£o" },
    { key: "tipo", label: "Tipo" },
    { key: "status", label: "Status" },
    { key: "valor", label: "Valor" },
    { key: "data_vencimento", label: "Vencimento" },
    { key: "data_pagamento", label: "Pagamento" },
    { key: "acoes", label: "" },
  ];

  if (loading)
    return (
      <p className="text-muted-foreground text-center py-6 animate-pulse">
        Carregando lanÃ§amentos...
      </p>
    );

  if (data.length === 0)
    return (
      <p className="text-muted-foreground text-center py-6">
        Nenhum lanÃ§amento encontrado.
      </p>
    );

  const handleDelete = async () => {
    if (!deleteTarget?.id) return;
    setDeleting(true);
    try {
      const res = await fetch(`/api/financeiro?id=${deleteTarget.id}`, {
        method: "DELETE",
      });
      const json = await res.json();
      if (!res.ok) throw new Error(json.error);
      Toast.success("LanÃ§amento removido com sucesso!");
      setDeleteTarget(null);
      onReload?.();
    } catch (err) {
      Toast.error("Erro ao excluir: " + err.message);
    } finally {
      setDeleting(false);
    }
  };

  // ðŸ”¹ Ajusta visualmente os dados
  const tableData = data.map((t) => ({
    ...t,
    status: <StatusBadge status={t.status} />,
    valor: formatCurrency(t.valor),
    acoes: (
      <div className="flex items-center gap-1 justify-end">
        <Button
          size="icon"
          variant="ghost"
          className="hover:bg-muted/50"
          onClick={() => Toast.info("Em breve: ediÃ§Ã£o de lanÃ§amento")}
        >
          <Edit size={16} className="text-blue-600" />
        </Button>
        <Button
          size="icon"
          variant="ghost"
          className="hover:bg-muted/50"
          onClick={() => setDeleteTarget(t)}
        >
          <Trash2 size={16} className="text-red-600" />
        </Button>
      </div>
    ),
  }));

  return (
    <>
      <div className="overflow-hidden rounded-xl border border-border shadow-sm">
        <Table columns={columns} data={tableData} />
      </div>

      {/* =======================================
          ðŸ”¹ MODAL DE CONFIRMAÃ‡ÃƒO DE EXCLUSÃƒO
      ======================================= */}
      <Modal
        open={!!deleteTarget}
        onOpenChange={(val) => {
          if (!val) setDeleteTarget(null);
        }}
        title="Remover LanÃ§amento"
      >
        {deleteTarget && (
          <div className="space-y-4">
            <p className="text-sm text-muted-foreground">
              Tem certeza que deseja excluir o lanÃ§amento{" "}
              <strong>{deleteTarget.descricao}</strong> no valor de{" "}
              <strong>{formatCurrency(deleteTarget.valor)}</strong>?
            </p>
            <div className="flex gap-2">
              <Button
                variant="secondary"
                className="w-1/2"
                onClick={() => setDeleteTarget(null)}
              >
                Cancelar
              </Button>
              <Button
                className="w-1/2 bg-red-600 hover:bg-red-700"
                onClick={handleDelete}
                disabled={deleting}
              >
                {deleting ? "Removendo..." : "Confirmar ExclusÃ£o"}
              </Button>
            </div>
          </div>
        )}
      </Modal>
    </>
  );
}

"use client";

import { useState } from "react";
import PageHeader from "@/components/admin/layout/PageHeader";
import Card from "@/components/admin/ui/Card";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { UsersRound, ShieldCheck, Sparkles } from "lucide-react";
import PerfisEquipePanel from "@/components/perfis/PerfisEquipePanel";
import PerfisPersonasPanel from "@/components/perfis/PerfisPersonasPanel";
import PerfisLeadsPanel from "@/components/perfis/PerfisLeadsPanel";

export default function PerfisPage() {
  const [tab, setTab] = useState("equipe");

  return (
    <div className="space-y-6">
      {/* ðŸ”¹ CabeÃ§alho */}
      <PageHeader
        title="Perfis do Sistema"
        description="Gerencie usuÃ¡rios da equipe, proprietÃ¡rios, inquilinos e leads."
      />

      {/* ðŸ”¹ Abas com estilo idÃªntico ao mÃ³dulo de imÃ³veis */}
      <Tabs value={tab} onValueChange={setTab} className="w-full">
        <TabsList className="bg-muted rounded-lg p-1 flex flex-wrap md:flex-nowrap gap-2">
          <TabsTrigger
            value="equipe"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background rounded-md px-4 py-2 text-sm font-medium transition-all"
          >
            <ShieldCheck size={16} /> Equipe
          </TabsTrigger>

          <TabsTrigger
            value="personas"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background rounded-md px-4 py-2 text-sm font-medium transition-all"
          >
            <UsersRound size={16} /> ProprietÃ¡rios & Inquilinos
          </TabsTrigger>

          <TabsTrigger
            value="leads"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background rounded-md px-4 py-2 text-sm font-medium transition-all"
          >
            <Sparkles size={16} /> Leads & Clientes
          </TabsTrigger>
        </TabsList>

        {/* ðŸ”¹ ConteÃºdo de cada aba dentro de Cards */}
        <div className="mt-6 space-y-4">
          <TabsContent value="equipe">
            <Card className="p-6 space-y-4">
              <PerfisEquipePanel />
            </Card>
          </TabsContent>

          <TabsContent value="personas">
            <Card className="p-6 space-y-4">
              <PerfisPersonasPanel />
            </Card>
          </TabsContent>

          <TabsContent value="leads">
            <Card className="p-6 space-y-4">
              <PerfisLeadsPanel />
            </Card>
          </TabsContent>
        </div>
      </Tabs>
    </div>
  );
}

"use client";

import { useState } from "react";
import PageHeader from "@/components/admin/layout/PageHeader";
import Card from "@/components/admin/ui/Card";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import {
  TrendingUp,
  TrendingDown,
  Banknote,
  Wallet,
  Users,
  BarChart3,
} from "lucide-react";

import ReceberPanel from "@/components/financeiro/ReceberPanel";
import PagarPanel from "@/components/financeiro/PagarPanel";
import RepassePanel from "@/components/financeiro/RepassePanel";
import InadimplenciaPanel from "@/components/financeiro/InadimplenciaPanel";
import ComissoesPanel from "@/components/financeiro/ComissoesPanel";
import FluxoCaixaPanel from "@/components/financeiro/FluxoCaixaPanel";

/**
 * ðŸ’° PÃ¡gina principal do mÃ³dulo Financeiro
 * Controla as abas, renderiza os painÃ©is e integra com a rota /api/financeiro
 */
export default function FinanceiroPage() {
  const [tab, setTab] = useState("receber");

  return (
    <div className="space-y-6">
      {/* ðŸ”¹ CabeÃ§alho da pÃ¡gina */}
      <PageHeader
        title="MÃ³dulo Financeiro"
        description="Controle total das receitas, despesas, repasses, inadimplÃªncias e fluxo de caixa da imobiliÃ¡ria."
      />

      {/* ðŸ”¹ Abas principais */}
      <Tabs value={tab} onValueChange={setTab} className="w-full">
        <TabsList className="bg-muted rounded-lg p-1 flex flex-wrap md:flex-nowrap gap-2">
          <TabsTrigger
            value="receber"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background px-4 py-2 rounded-md text-sm font-medium transition-all"
          >
            <TrendingUp size={16} /> Receber
          </TabsTrigger>

          <TabsTrigger
            value="pagar"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background px-4 py-2 rounded-md text-sm font-medium transition-all"
          >
            <TrendingDown size={16} /> Pagar
          </TabsTrigger>

          <TabsTrigger
            value="repasse"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background px-4 py-2 rounded-md text-sm font-medium transition-all"
          >
            <Banknote size={16} /> Repasses
          </TabsTrigger>

          <TabsTrigger
            value="inadimplencia"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background px-4 py-2 rounded-md text-sm font-medium transition-all"
          >
            <Wallet size={16} /> InadimplÃªncia
          </TabsTrigger>

          <TabsTrigger
            value="comissoes"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background px-4 py-2 rounded-md text-sm font-medium transition-all"
          >
            <Users size={16} /> ComissÃµes
          </TabsTrigger>

          <TabsTrigger
            value="fluxo"
            className="flex items-center gap-2 data-[state=active]:bg-foreground data-[state=active]:text-background px-4 py-2 rounded-md text-sm font-medium transition-all"
          >
            <BarChart3 size={16} /> Fluxo de Caixa
          </TabsTrigger>
        </TabsList>

        {/* ðŸ”¹ ConteÃºdo de cada aba dentro de Cards */}
        <div className="mt-6 space-y-4">
          <TabsContent value="receber">
            <Card className="p-6 space-y-4">
              <ReceberPanel />
            </Card>
          </TabsContent>

          <TabsContent value="pagar">
            <Card className="p-6 space-y-4">
              <PagarPanel />
            </Card>
          </TabsContent>

          <TabsContent value="repasse">
            <Card className="p-6 space-y-4">
              <RepassePanel />
            </Card>
          </TabsContent>

          <TabsContent value="inadimplencia">
            <Card className="p-6 space-y-4">
              <InadimplenciaPanel />
            </Card>
          </TabsContent>

          <TabsContent value="comissoes">
            <Card className="p-6 space-y-4">
              <ComissoesPanel />
            </Card>
          </TabsContent>

          <TabsContent value="fluxo">
            <Card className="p-6 space-y-4">
              <FluxoCaixaPanel />
            </Card>
          </TabsContent>
        </div>
      </Tabs>
    </div>
  );
}

