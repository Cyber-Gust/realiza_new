{
  "enums": {
    "user_role": ["admin", "corretor"],
    "persona_tipo": ["proprietario", "inquilino", "cliente"],
    "imovel_status": ["disponivel", "reservado", "alugado", "vendido", "inativo"],
    "imovel_tipo": ["apartamento", "casa", "terreno", "comercial", "rural"],
    "disponibilidade": ["venda", "locacao", "ambos"],
    "lead_status": ["novo", "qualificado", "visita_agendada", "proposta_feita", "documentacao", "concluido", "perdido"],
    "contrato_tipo": ["locacao", "venda", "administracao"],
    "transacao_tipo": [
      "receita_aluguel",
      "taxa_adm_imobiliaria",
      "repasse_proprietario",
      "comissao_corretor",
      "despesa_manutencao",
      "pagamento_iptu",
      "pagamento_condominio"
    ],
    "transacao_status": ["pendente", "pago", "atrasado", "cancelado"],
    "os_status": ["aberta", "orcamento", "aprovada_pelo_inquilino", "aprovada_pelo_proprietario", "em_execucao", "concluida", "cancelada"]
  },
  "tables": {
    "profiles": {
      "id": "uuid (pk, ref auth.users.id)",
      "nome_completo": "text",
      "email": "text",
      "cpf_cnpj": "text",
      "telefone": "text",
      "role": "user_role",
      "creci": "text",
      "dados_bancarios_json": "jsonb",
      "updated_at": "timestamptz",
      "avatar_url": "text"
    },
      "imoveis": {
      "id": "uuid (pk)",
      "proprietario_id": "uuid (ref personas.id)",
      "corretor_id": "uuid (ref profiles.id)",
      "codigo_ref": "text",
      "titulo": "text",
      "descricao": "text",
      "endereco_cep": "text",
      "endereco_logradouro": "text",
      "endereco_numero": "text",
      "endereco_bairro": "text",
      "endereco_cidade": "text",
      "endereco_estado": "char(2)",
      "tipo": "imovel_tipo",
      "status": "imovel_status",
      "disponibilidade": "disponibilidade_tipo", 
      "preco_venda": "decimal(12,2)",
      "preco_locacao": "decimal(10,2)",
      "valor_condominio": "decimal(10,2)",
      "valor_iptu": "decimal(10,2)",
      "area_total": "int",
      "quartos": "int",
      "banheiros": "int",
      "vagas_garagem": "int",
      "pet_friendly": "bool",
      "mobiliado": "bool",
      "documentos_compliance_json": "jsonb",
      "chaves_localizacao": "text",
      "created_at": "timestamptz DEFAULT now()",
      "updated_at": "timestamptz DEFAULT now()"
    },

    "imoveis_chaves_historico": {
      "id": "uuid (pk)",
      "imovel_id": "uuid (ref imoveis.id)",
      "usuario_id": "uuid (ref profiles.id)",
      "acao": "text (check: ['retirada', 'devolucao', 'transferencia', 'outro'])",
      "localizacao": "text",
      "observacao": "text",
      "created_at": "timestamptz"
    },
    "imoveis_precos": {
      "id": "uuid (pk)",
      "imovel_id": "uuid (ref imoveis.id)",
      "usuario_id": "uuid (ref profiles.id)",
      "tipo": "text (check: ['venda', 'locacao'])",
      "valor": "decimal(12,2)",
      "descricao": "text",
      "created_at": "timestamptz"
    },
    "leads": {
      "id": "uuid (pk)",
      "corretor_id": "uuid (ref profiles.id)",
      "nome": "text",
      "email": "text",
      "telefone": "text",
      "status": "lead_status",
      "origem": "text",
      "perfil_busca_json": "jsonb",
      "created_at": "timestamptz",
      "updated_at": "timestamptz"
    },

      "personas": {
      "id": "uuid (pk)",
      "nome": "text",
      "email": "text",
      "telefone": "text",
      "cpf_cnpj": "text",
      "tipo": "persona_tipo",
      "endereco_json": "jsonb",
      "observacoes": "text",
      "created_at": "timestamptz",
      "updated_at": "timestamptz"
    },  
    "propostas": {
      "id": "uuid (pk)",
      "imovel_id": "uuid (ref imoveis.id)",
      "lead_id": "uuid (ref leads.id)",
      "cliente_id": "uuid (ref profiles.id)",
      "corretor_id": "uuid (ref profiles.id)",
      "valor_proposta": "decimal(12,2)",
      "condicao_garantia": "text",
      "status": "text",
      "created_at": "timestamptz"
    },
    "contratos": {
      "id": "uuid (pk)",
      "imovel_id": "uuid (ref imoveis.id)",
      "proprietario_id": "uuid (ref personas.id)",
      "inquilino_id": "uuid (ref personas.id)",
      "tipo": "contrato_tipo",
      "data_inicio": "date",
      "data_fim": "date",
      "valor_acordado": "decimal(10,2)",
      "taxa_administracao_percent": "decimal(5,2)",
      "dia_vencimento_aluguel": "int",
      "indice_reajuste": "text",
      "status": "text",
      "documento_assinado_url": "text",
      "created_at": "timestamptz"
    },
    "transacoes": {
      "id": "uuid (pk)",
      "contrato_id": "uuid (ref contratos.id)",
      "imovel_id": "uuid (ref imoveis.id)",
      "profile_id": "uuid (ref profiles.id)",
      "tipo": "transacao_tipo",
      "status": "transacao_status",
      "descricao": "text",
      "valor": "decimal(10,2)",
      "data_vencimento": "date",
      "data_pagamento": "date",
      "dados_cobranca_json": "jsonb",
      "created_at": "timestamptz"
    },
    "ordens_servico": {
      "id": "uuid (pk)",
      "imovel_id": "uuid (ref imoveis.id)",
      "contrato_id": "uuid (ref contratos.id)",
      "solicitante_id": "uuid (ref profiles.id)",
      "descricao_problema": "text",
      "status": "os_status",
      "orcamentos_json": "jsonb",
      "custo_final": "decimal(10,2)",
      "prestador_aprovado": "text",
      "created_at": "timestamptz",
      "updated_at": "timestamptz"
    },
    "vistorias": {
      "id": "uuid (pk)",
      "imovel_id": "uuid (ref imoveis.id)",
      "contrato_id": "uuid (ref contratos.id)",
      "tipo": "text",
      "data_vistoria": "date",
      "laudo_descricao": "text",
      "documento_laudo_url": "text",
      "created_at": "timestamptz"
    },
    "agenda_eventos": {
      "id": "uuid (pk)",
      "profile_id": "uuid (ref profiles.id)",
      "lead_id": "uuid (ref leads.id)",
      "imovel_id": "uuid (ref imoveis.id)",
      "titulo": "text",
      "tipo": "text",
      "data_inicio": "timestamptz",
      "data_fim": "timestamptz",
      "created_at": "timestamptz"
    }
  },
  "buckets": {
    "imoveis_media": "fotos e plantas públicas dos imóveis",
    "documentos_kyc": "documentos pessoais de clientes (RG/CPF)",
    "documentos_contratos": "contratos assinados entre partes",
    "documentos_vistorias": "laudos de vistorias de entrada/saída",
    "documentos_compliance": "documentos de regularização dos imóveis"
  }
}
